<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.16">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Summary of Python features</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="week1_files/libs/clipboard/clipboard.min.js"></script>
<script src="week1_files/libs/quarto-html/quarto.js"></script>
<script src="week1_files/libs/quarto-html/popper.min.js"></script>
<script src="week1_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="week1_files/libs/quarto-html/anchor.min.js"></script>
<link href="week1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="week1_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="week1_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="week1_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="week1_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-full">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#basics" id="toc-basics" class="nav-link active" data-scroll-target="#basics">Basics</a></li>
  <li><a href="#control-flow" id="toc-control-flow" class="nav-link" data-scroll-target="#control-flow">Control Flow</a></li>
  <li><a href="#data-structures" id="toc-data-structures" class="nav-link" data-scroll-target="#data-structures">Data Structures</a>
  <ul class="collapse">
  <li><a href="#lists" id="toc-lists" class="nav-link" data-scroll-target="#lists">Lists</a></li>
  </ul></li>
  <li><a href="#user-defined-functions" id="toc-user-defined-functions" class="nav-link" data-scroll-target="#user-defined-functions">User-Defined Functions</a></li>
  <li><a href="#core-python-idioms" id="toc-core-python-idioms" class="nav-link" data-scroll-target="#core-python-idioms">Core-Python Idioms</a>
  <ul class="collapse">
  <li><a href="#list-comprehensions" id="toc-list-comprehensions" class="nav-link" data-scroll-target="#list-comprehensions">List Comprehensions</a></li>
  <li><a href="#iterating-idiomatically" id="toc-iterating-idiomatically" class="nav-link" data-scroll-target="#iterating-idiomatically">Iterating Idiomatically</a></li>
  </ul></li>
  <li><a href="#basic-plotting-with-matplotlib" id="toc-basic-plotting-with-matplotlib" class="nav-link" data-scroll-target="#basic-plotting-with-matplotlib">Basic Plotting with matplotlib</a></li>
  <li><a href="#project-visualiznig-electric-fields" id="toc-project-visualiznig-electric-fields" class="nav-link" data-scroll-target="#project-visualiznig-electric-fields">Project: Visualiznig Electric Fields</a>
  <ul class="collapse">
  <li><a href="#electric-field-of-a-distribution-of-point-charges" id="toc-electric-field-of-a-distribution-of-point-charges" class="nav-link" data-scroll-target="#electric-field-of-a-distribution-of-point-charges">Electric Field of a Distribution of Point Charges</a></li>
  <li><a href="#plotting-field-line" id="toc-plotting-field-line" class="nav-link" data-scroll-target="#plotting-field-line">Plotting Field Line</a></li>
  </ul></li>
  <li><a href="#numpy-idioms" id="toc-numpy-idioms" class="nav-link" data-scroll-target="#numpy-idioms">Numpy idioms</a></li>
  <li><a href="#homework-problems" id="toc-homework-problems" class="nav-link" data-scroll-target="#homework-problems">Homework Problems</a></li>
  </ul>
</nav>
</div>
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Summary of Python features</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<section id="basics" class="level2">
<h2 class="anchored" data-anchor-id="basics">Basics</h2>
<ul>
<li>Python can run interactively (as in this <strong>Jupyter notebook/lab</strong>) or noninteractively through a script file (via command <code>python xxx.py</code>).</li>
<li>Python is a dynamically typed language, which means you don’t declare the type of variables at the beginning, and the variables get their type from their value. Eg. <code>x = 0.5</code> creates a float variable.</li>
<li>Many functions can be obtained by importing standard library modules. Eg. the square root function <code>sqrt</code> can be obtained by <code>import math</code> and then be used as <code>math.sqrt(x)</code>.</li>
<li>Some Pythonic expressions: <code>x += 1</code> means <code>x = x+1</code>. Exchanging values of variables <code>x, y = y, x</code>.</li>
</ul>
</section>
<section id="control-flow" class="level2">
<h2 class="anchored" data-anchor-id="control-flow">Control Flow</h2>
<ul>
<li>Run code under conditions:</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (x <span class="op">!=</span> <span class="dv">0</span>):</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"x is nonzero"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Note that the <strong>indentation</strong> after the colon “:” is important.</li>
<li>Two types of loop (<code>for</code> loop is recommended in practice):</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> (condition):</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>        ...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">3</span>):</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>        ...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><code>range(n)</code> gives the integers from <code>0</code> to <code>n-1</code>. <code>range(m,n,i)</code> gives the integers from <code>m</code> to <code>n-1</code> in steps of <code>i</code>.</li>
</ul>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ii <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">10</span>,<span class="dv">2</span>):</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(ii, end <span class="op">=</span> <span class="st">" "</span>)  <span class="co"># end = " " means after printing ii, we put a space at the end (no new lines)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>0 2 4 6 8</p>
</section>
<section id="data-structures" class="level2">
<h2 class="anchored" data-anchor-id="data-structures">Data Structures</h2>
<section id="lists" class="level3">
<h3 class="anchored" data-anchor-id="lists">Lists</h3>
<p>A list is a container of elements (of any type), and the number of elements can grow. For example, <code>zs = [5, 1+2j, -2.0]</code> is a list. <code>zs[0]</code> is the first element and <code>zs[-1]</code> is the last one. We can change the element in the list, for example, by <code>zs[1]=9</code>, which will replace <code>1+2j</code> in the original list. We can also introduce a new element at the end of the list, by the <code>append()</code> command. See the following example:</p>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>xs <span class="op">=</span> []</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">20</span>):</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    xs.append(<span class="fl">0.1</span><span class="op">*</span>i)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(xs) <span class="co"># there can be numerical errors</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[0.0, 0.1, 0.2, 0.30000000000000004, 0.4, 0.5, 0.6000000000000001, 0.7000000000000001, 0.8, 0.9, 1.0, 1.1, 1.2000000000000002, 1.3, 1.4000000000000001, 1.5, 1.6, 1.7000000000000002, 1.8, 1.9000000000000001]</code></pre>
</div>
</div>
<p>If we add two lists <code>zs = xs + ys</code>, we concatenate the lists <code>xs</code> and <code>ys</code> into <code>zs</code>. Similarly, <code>xs = 4 * [0]</code> simplies gives <code>xs = [0,0,0,0]</code>.</p>
<p><strong>Slicing</strong> is an important feature. <code>xs[2:5]</code> means we extract a smaller list consisting <code>xs[2]</code> up to <code>xs[4]</code> (exclude <code>xs[5]</code>). Further, we can use <code>ws[m:n:i]</code>, which means we extract <code>ws[m]</code> up to but not include <code>ws[n]</code> where the index goes in steps of <code>i</code>.</p>
<p><strong>Copy list</strong>: if we assign an old list <code>xs</code> to a new list <code>ys</code>, via <code>ys = xs</code>, then <code>ys</code> will just be another name for the old list. See the following example:</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>xs <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>ys <span class="op">=</span> xs</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>ys[<span class="dv">0</span>] <span class="op">=</span> <span class="dv">7</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(xs) <span class="co"># see the values of the old list is modified</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[7, 2, 3]</code></pre>
</div>
</div>
<p>On the other hand, when you slice a list, you get a <strong>new</strong> list. Particularly, <code>ys = xs[:]</code> creates a new list <code>ys</code>, which is different from the old list <code>xs</code>. See the following example:</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>xs <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>ys <span class="op">=</span> xs[:]</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>ys[<span class="dv">0</span>] <span class="op">=</span> <span class="dv">7</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(xs)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ys)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1, 2, 3]
[7, 2, 3]</code></pre>
</div>
</div>
<p><strong>Tuples</strong> can be regarded as <em>immutable</em> lists, which means they can neither change nor grow. We use <em>parentheses</em> instead of square brackets for the tuples, <code>xs = (1,2,3)</code>, or sometimes even without the parentheses, <code>xs = 1,2,3</code>. After it is created, we cannot change its values. If you type <code>xs[0] = 3</code>, you will get an error. You do have access to the elements in the tuples. Whey you type <code>print(xs[0])</code>, you will get <code>1</code>.</p>
<p><strong>Strings</strong> can be viewed as a sequence. For example, <code>name = "Mary"</code>, then <code>name[-1]</code> will be the character <code>y</code>. (Either double or single quotation marks can be used.) Strings are also <em>immutable</em>. You can use <code>+</code> to concatenate two strings. A useful function tha|t acts on the strings is <code>format()</code>: it uses <em>positional</em> arguments, numbered starting from <code>0</code>, within curly braces. See the following example</p>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>x,y <span class="op">=</span><span class="fl">123.3</span>, <span class="op">-</span><span class="fl">2.8</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="sc">{0}</span><span class="st"> </span><span class="sc">{1}</span><span class="st">"</span>.<span class="bu">format</span>(x,y))</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="sc">{0:.10f}</span><span class="st">, </span><span class="sc">{1}</span><span class="st">"</span>.<span class="bu">format</span>(x,y))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>123.3 -2.8
123.3000000000, -2.8</code></pre>
</div>
</div>
<p>In the above example, the <code>.10f</code> after the colon means we format the first variable <code>x</code> as a float number with ten digits after the decimal point.</p>
<p><strong>Dictionaries</strong> are also called associative arrays in computer science (or maps in C++). They are <em>key-value</em> pairs. For example, we can introduce <code>htow = {1.4 : 30.1, 1.5 : 42.3, 1.6 : 48}</code>. Here, <code>1.4</code>, <code>1.5</code>, and <code>1.6</code> are keys. <code>30.1</code>, <code>42.3</code> and <code>48</code> are the corresponding values. One can access the values via the keys, via e.g.&nbsp;<code>htow[1.5]</code>, which gives <code>42.3</code>. Note that the keys and values can be strings, floats etc.</p>
</section>
</section>
<section id="user-defined-functions" class="level2">
<h2 class="anchored" data-anchor-id="user-defined-functions">User-Defined Functions</h2>
<p>In python, function are defined using the following code block, which sum from 1 up to some integer.</p>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> sumofints(nmax):</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    val <span class="op">=</span> <span class="bu">sum</span>(<span class="bu">range</span>(<span class="dv">1</span>,nmax<span class="op">+</span><span class="dv">1</span>))</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> val</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>sumofints(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>55</code></pre>
</div>
</div>
<p>Sometimes it is also useful to introduce default parameters in a function. For example, we can set the default <code>nmax</code> to be <code>10</code>. When we omit the parameter, the function runs with its default parameters. See below:</p>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> sumofints2(nmax <span class="op">=</span> <span class="dv">10</span>):</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    val <span class="op">=</span> <span class="bu">sum</span>(<span class="bu">range</span>(<span class="dv">1</span>,nmax<span class="op">+</span><span class="dv">1</span>))</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> val</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>sumofints2()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>55</code></pre>
</div>
</div>
<p>Another way to define a function is via <code>lambda</code> function. See the following example:</p>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> <span class="kw">lambda</span> x,y: x<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> y<span class="op">**</span><span class="dv">2</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co"># define a function f(x,y)</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>f(<span class="dv">3</span>,<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>25</code></pre>
</div>
</div>
<p>In python, function can be passed to other functions. For example, we can define a function that numerically calculate the derivative of a function. See the following example</p>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>g <span class="op">=</span> <span class="kw">lambda</span> x: x<span class="op">**</span><span class="dv">3</span> <span class="co"># compute x cube</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> der(f, x, h<span class="op">=</span><span class="fl">0.01</span>):</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (f(x<span class="op">+</span>h) <span class="op">-</span> f(x))<span class="op">/</span>h</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the derivative of x^3 at x=1. </span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co"># The exact result is 3. </span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(der(g,<span class="dv">1</span>))</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(der(g,<span class="dv">1</span>,<span class="fl">1e-5</span>)) <span class="co"># choose a smaller h</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>3.0301000000000133
3.000030000110953</code></pre>
</div>
</div>
</section>
<section id="core-python-idioms" class="level2">
<h2 class="anchored" data-anchor-id="core-python-idioms">Core-Python Idioms</h2>
<section id="list-comprehensions" class="level3">
<h3 class="anchored" data-anchor-id="list-comprehensions">List Comprehensions</h3>
<p>We can replace the previous example that creates a list of the form <code>0.1*i</code> for i runs from 0,1,… up to 19. This can be done via <code>xs = [0.1*i for i in range(20)]</code>, this is called <em>list comprehension</em>. How do we double each elements in <code>xs</code>? Note that we <strong>cannot</strong> use <code>2*xs</code>, because this simply concatenate two <code>xs</code> lists. The can be done in the following example:</p>
<div class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>xs <span class="op">=</span> [<span class="fl">0.1</span> <span class="op">*</span> i <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">20</span>)]</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>ys <span class="op">=</span> [<span class="dv">2</span><span class="op">*</span>x <span class="cf">for</span> x <span class="kw">in</span> xs]</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ys)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[0.0, 0.2, 0.4, 0.6000000000000001, 0.8, 1.0, 1.2000000000000002, 1.4000000000000001, 1.6, 1.8, 2.0, 2.2, 2.4000000000000004, 2.6, 2.8000000000000003, 3.0, 3.2, 3.4000000000000004, 3.6, 3.8000000000000003]</code></pre>
</div>
</div>
<p>We can even add conditions in list comprehensions.</p>
<div class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>zs <span class="op">=</span> [<span class="dv">2</span><span class="op">*</span>x <span class="cf">for</span> x <span class="kw">in</span> xs <span class="cf">if</span> x<span class="op">&gt;</span><span class="dv">1</span>]</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co"># This only doubles the elements greater than 1.</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(zs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2.2, 2.4000000000000004, 2.6, 2.8000000000000003, 3.0, 3.2, 3.4000000000000004, 3.6, 3.8000000000000003]</code></pre>
</div>
</div>
</section>
<section id="iterating-idiomatically" class="level3">
<h3 class="anchored" data-anchor-id="iterating-idiomatically">Iterating Idiomatically</h3>
<p><strong>One list</strong> The conventional way to iterate the list xs:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(xs)):</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(xs[i])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The pythonic way is</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> x <span class="kw">in</span> xs:</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Sometimes, you may also want to get the index i when iterating the list. See the following example</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>xs <span class="op">=</span> [<span class="fl">0.1</span><span class="op">*</span>i <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>)]</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i,x <span class="kw">in</span> <span class="bu">enumerate</span>(xs):</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"</span><span class="sc">{0}</span><span class="st"> </span><span class="sc">{1:.1f}</span><span class="st">"</span>.<span class="bu">format</span>(i,x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0 0.0
1 0.1
2 0.2
3 0.3
4 0.4</code></pre>
</div>
</div>
<p><strong>Two lists</strong> If <code>xs</code> and <code>ys</code> are of the same lenth, we can use the <code>zip()</code> command to simplify the following non-pythonic function.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Non-pythonic way</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(xs)):</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(xs[i],ys[i])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pythonic way</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>xs <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>ys <span class="op">=</span> [<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> x,y <span class="kw">in</span> <span class="bu">zip</span>(xs,ys):</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(x,y) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1 4
2 5
3 6</code></pre>
</div>
</div>
<p><strong>Dictionaries</strong> We can use <code>.items()</code> method of dictionaries to loop over all key-value pairs in the dictionary. See the following example</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>name_age <span class="op">=</span> {<span class="st">"Alice"</span>: <span class="dv">12</span>, <span class="st">"Bob"</span>: <span class="dv">14</span>, <span class="st">"Sam"</span>: <span class="dv">11</span>}</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> name,age <span class="kw">in</span> name_age.items():</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"</span><span class="sc">{0}</span><span class="st"> </span><span class="sc">{1}</span><span class="st">"</span>.<span class="bu">format</span>(name,age))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Alice 12
Bob 14
Sam 11</code></pre>
</div>
</div>
<p><strong>For-else</strong> You can follow the <code>for</code> loop by an <code>else</code>. This is counterituitive but can be very helpful. The way this works is that the <code>for</code> loop is run as usual: if no <code>break</code> is encountered during execution of the <code>for</code> block, then control proceeds to the <code>else</code> block. If a <code>break</code> is encountered during execution of the <code>for</code> block, then the <code>else</code> block is not run. See the following example.</p>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> look_up_age(target,name_age):</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> name,age <span class="kw">in</span> name_age.items():</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> name<span class="op">==</span>target:</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>            val <span class="op">=</span> age</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>        val <span class="op">=</span> <span class="va">None</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> val</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>name_age <span class="op">=</span> {<span class="st">"Alice"</span>:<span class="dv">12</span>, <span class="st">"Bob"</span>:<span class="dv">14</span>, <span class="st">"Sam"</span>:<span class="dv">11</span>}</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(look_up_age(<span class="st">"Sam"</span>, name_age))</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(look_up_age(<span class="st">"Jack"</span>, name_age))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>11
None</code></pre>
</div>
</div>
</section>
</section>
<section id="basic-plotting-with-matplotlib" class="level2">
<h2 class="anchored" data-anchor-id="basic-plotting-with-matplotlib">Basic Plotting with matplotlib</h2>
<p>The Python ecosystem gives us the option of visualizing relationships between numbers via <code>matplotlib</code>, a plotting library (i.e., not part of core Python) which can produce quality figures. Specifically, we use the <code>matplotlib.pyplot</code> module to produce figures.</p>
<p>If you want to learn more, please to visit <a href="https://matplotlib.org/">Matplotlib’s webpage</a>, especially the <a href="https://matplotlib.org/stable/tutorials/index.html">Tutorial page</a>.</p>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt <span class="co"># plt is the short name for matplotlib.pyplot</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plotex(cxs,cys,dxs,dys):</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(<span class="st">'x'</span>, fontsize<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(<span class="st">'f(x)'</span>, fontsize<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    plt.plot(cxs, cys, <span class="st">'r-'</span>, label<span class="op">=</span><span class="st">'quadratic'</span>)</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    plt.plot(dxs, dys, <span class="st">'b--'</span>, label<span class="op">=</span><span class="st">'other function'</span>)</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    plt.legend()</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>cxs <span class="op">=</span> [<span class="fl">0.1</span><span class="op">*</span>i <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">60</span>)]</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>cys <span class="op">=</span> [x<span class="op">**</span><span class="dv">2</span> <span class="cf">for</span> x <span class="kw">in</span> cxs]</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>dxs <span class="op">=</span> [i <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">7</span>)]</span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>dys <span class="op">=</span> [x<span class="op">**</span><span class="fl">1.8</span> <span class="op">-</span> <span class="fl">0.5</span> <span class="cf">for</span> x <span class="kw">in</span> dxs]</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>plotex(cxs, cys, dxs, dys)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="week1_files/figure-html/cell-17-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="project-visualiznig-electric-fields" class="level2">
<h2 class="anchored" data-anchor-id="project-visualiznig-electric-fields">Project: Visualiznig Electric Fields</h2>
<p>We shall use <code>matplotlib</code> to visualize a vector field, by drawing field lines for the electric field produced by several point charges.</p>
<section id="electric-field-of-a-distribution-of-point-charges" class="level3">
<h3 class="anchored" data-anchor-id="electric-field-of-a-distribution-of-point-charges">Electric Field of a Distribution of Point Charges</h3>
<p>Let us recall the <em>Coulomb’s law</em>: the force on a test charge <span class="math inline">\(Q\)</span> located at point <span class="math inline">\(P\)</span> (at position <span class="math inline">\(\boldsymbol{r}\)</span>), coming from a single point charge <span class="math inline">\(q_0\)</span> located at <span class="math inline">\(\boldsymbol{r}_0\)</span> is given by:</p>
<p><span class="math display">\[
\boldsymbol{F}_0 = k\frac{q_0 Q}{(\boldsymbol{r} - \boldsymbol{r}_0)^2} \frac{\boldsymbol{r} - \boldsymbol{r}_0}{|\boldsymbol{r} - \boldsymbol{r}_0|}
\]</span></p>
<p>where the Coulomb constant <span class="math inline">\(k = 1/(4\pi \epsilon_0)\)</span> in SI units.</p>
<p>The electric field <span class="math inline">\(\boldsymbol{E}_0\)</span> is the ratio of the force <span class="math inline">\(\boldsymbol{F}_0\)</span> with the test charge <span class="math inline">\(Q\)</span> in the limit <span class="math inline">\(Q\to 0\)</span>. In practice, this gives</p>
<p><span class="math display">\[
\boldsymbol{E}_0(\boldsymbol{r}) = kq_0 \frac{\boldsymbol{r} - \boldsymbol{r}_0}{|\boldsymbol{r} - \boldsymbol{r}_0|^3}.
\]</span></p>
<p>If we have more than one point charge, we could apply the <em>principle of superposition</em>, by summing over the electric fields created by point charges <span class="math inline">\(q_0, q_1, \dots, q_{n-1}\)</span></p>
<p><span id="eq-electric_field"><span class="math display">\[
\boldsymbol{E}(\boldsymbol{r}) = \sum_{i = 0}^{n-1} \boldsymbol{E}_i(\boldsymbol{r})
= \sum_{i=0}^{n-1} kq_i \frac{\boldsymbol{r} - \boldsymbol{r}_0}{|\boldsymbol{r} - \boldsymbol{r}_0|^3}.
\tag{1}\]</span></span></p>
<p>Note that the electric field is a vector quantity: at any point in space it has a magniude and a direction. One way of visualizing vector fields consists of drawing <em>field lines</em>,namely imaginary curves that help us keep track of the direction of the field. More specifically, the tangent of a field line at a given point gives us the direction of the electric field at that point. Field lines do not cross; they start at positive charges (“sources”) and end at negative charges (“sinks”).</p>
</section>
<section id="plotting-field-line" class="level3">
<h3 class="anchored" data-anchor-id="plotting-field-line">Plotting Field Line</h3>
<p>We have two tasks:</p>
<ol type="1">
<li>We need to find the electric field (vector) at several points near the charges (<a href="#eq-electric_field">Equation&nbsp;1</a>).</li>
<li>We need to plot field lines in such a way that we can physically interpret what is happening.</li>
</ol>
<p>We shall only consider the problem with only <strong>two</strong> point charges of equal magnitude and opposite sign. We restrict ourselves to two dimensions.</p>
<p>Below is the python implementation, where we take the Coulomb constant <span class="math inline">\(k=1\)</span> for simplicity. We start by importing <code>numpy</code> and <code>matplotlib</code>. We also import the square root function and the <code>deepcopy()</code> function, which can create a distinct list-of-lists.</p>
<p>The function <code>makefield()</code> takes in two liss, <code>xs</code> and <code>ys</code>, corresponding to the coordinates at which we wish to evaluate field. We also need to store the <span class="math inline">\(\boldsymbol{r}_i\)</span> at which the point charges are located.</p>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> math <span class="im">import</span> sqrt</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> copy <span class="im">import</span> deepcopy</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> makefield(rlist, qtopos):</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">'''</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="co">    This function computes the electric field vector (Ex, Ey) at different locations r=(x,y).</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="co">    Here, the inputs are: </span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="co">    rlist = [[x1,y1],[x2,y2],...] for the locations at which we want to calculate the electric fields.</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="co">    qtopos = [[q1, (posx, posy)], [q2, (posx, posy)] ...] </span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a><span class="co">    corresonding to locations r1 = (x1,y1), r2 = (x2,y2), ...</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a><span class="co">    '''</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># First, create an empty list</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>    Es <span class="op">=</span> []</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> r <span class="kw">in</span> rlist:</span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>        <span class="co"># loop over all locations at which the electric fields will be evaluated</span></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>        x,y <span class="op">=</span> r</span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>        <span class="co"># extract the x and y coordinate</span></span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>        Ex <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>        Ey <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>        <span class="co"># set initial electric field strength to zero</span></span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> q_pos <span class="kw">in</span> qtopos:</span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>            q,pos <span class="op">=</span> q_pos</span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>            <span class="co"># loop over all point charge and position pairs:</span></span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a>            posx, posy <span class="op">=</span> pos</span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a>            R <span class="op">=</span> sqrt((x <span class="op">-</span> posx)<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> (y <span class="op">-</span> posy)<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Calculate the distance</span></span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a>            Ex <span class="op">+=</span> q<span class="op">*</span>(x <span class="op">-</span> posx)<span class="op">/</span>R<span class="op">**</span><span class="dv">3</span></span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true" tabindex="-1"></a>            Ey <span class="op">+=</span> q<span class="op">*</span>(y <span class="op">-</span> posy)<span class="op">/</span>R<span class="op">**</span><span class="dv">3</span></span>
<span id="cb37-31"><a href="#cb37-31" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Add up contribution to the electric field from each point charge</span></span>
<span id="cb37-32"><a href="#cb37-32" aria-hidden="true" tabindex="-1"></a>        Es.append(np.array([Ex,Ey])) <span class="co"># append the electric field np.array([Ex, Ey]) into the list Es</span></span>
<span id="cb37-33"><a href="#cb37-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Es <span class="co"># return the list of electric fields at all locations in rlist</span></span>
<span id="cb37-34"><a href="#cb37-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-35"><a href="#cb37-35" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plotfield(boxlx,boxly, n, m, qtopos<span class="op">=</span> [[<span class="dv">1</span>,(<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>)], [<span class="op">-</span><span class="dv">1</span>,(<span class="dv">1</span>,<span class="dv">0</span>)]]):</span>
<span id="cb37-36"><a href="#cb37-36" aria-hidden="true" tabindex="-1"></a>    <span class="co">'''</span></span>
<span id="cb37-37"><a href="#cb37-37" aria-hidden="true" tabindex="-1"></a><span class="co">    plot the electric field in a region [-boxlx, boxlx] x [-boxly, boxly], </span></span>
<span id="cb37-38"><a href="#cb37-38" aria-hidden="true" tabindex="-1"></a><span class="co">    with n x m grid points at which the electric field shall be evaluated.</span></span>
<span id="cb37-39"><a href="#cb37-39" aria-hidden="true" tabindex="-1"></a><span class="co">    The default value for qtopos = [[1,(-1,0)],[-1,(1,0)]]</span></span>
<span id="cb37-40"><a href="#cb37-40" aria-hidden="true" tabindex="-1"></a><span class="co">    '''</span></span>
<span id="cb37-41"><a href="#cb37-41" aria-hidden="true" tabindex="-1"></a>    <span class="co"># all possible x coordinates, from -boxl to boxl, with n points </span></span>
<span id="cb37-42"><a href="#cb37-42" aria-hidden="true" tabindex="-1"></a>    xlist <span class="op">=</span> [<span class="op">-</span>boxlx <span class="op">+</span> i<span class="op">*</span><span class="dv">2</span><span class="op">*</span>boxlx<span class="op">/</span>(n<span class="op">-</span><span class="dv">1</span>) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n)]</span>
<span id="cb37-43"><a href="#cb37-43" aria-hidden="true" tabindex="-1"></a>    <span class="co"># all possible y coordinates</span></span>
<span id="cb37-44"><a href="#cb37-44" aria-hidden="true" tabindex="-1"></a>    ylist <span class="op">=</span> [<span class="op">-</span>boxly <span class="op">+</span> i<span class="op">*</span><span class="dv">2</span><span class="op">*</span>boxly<span class="op">/</span>(m<span class="op">-</span><span class="dv">1</span>) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(m)]</span>
<span id="cb37-45"><a href="#cb37-45" aria-hidden="true" tabindex="-1"></a>    rlist <span class="op">=</span> [[x,y] <span class="cf">for</span> y <span class="kw">in</span> ylist <span class="cf">for</span> x <span class="kw">in</span> xlist]</span>
<span id="cb37-46"><a href="#cb37-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># rlist = [[x1,y1],[x2,y1],[x3,y1],...,</span></span>
<span id="cb37-47"><a href="#cb37-47" aria-hidden="true" tabindex="-1"></a>    <span class="co">#          [x1,y2],[x2,y2],[x3,y2],...,</span></span>
<span id="cb37-48"><a href="#cb37-48" aria-hidden="true" tabindex="-1"></a>    <span class="co">#          ...,</span></span>
<span id="cb37-49"><a href="#cb37-49" aria-hidden="true" tabindex="-1"></a>    <span class="co">#          [x1,yn],[x2,yn],[x3,yn],...]</span></span>
<span id="cb37-50"><a href="#cb37-50" aria-hidden="true" tabindex="-1"></a>    Es <span class="op">=</span> np.array(makefield(rlist,qtopos))</span>
<span id="cb37-51"><a href="#cb37-51" aria-hidden="true" tabindex="-1"></a>    <span class="co"># convert List of electric fieds into a 2d numpy array</span></span>
<span id="cb37-52"><a href="#cb37-52" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Es= np.array([E11,E21,E31,...,</span></span>
<span id="cb37-53"><a href="#cb37-53" aria-hidden="true" tabindex="-1"></a>    <span class="co">#               E12,E22,E32,...,</span></span>
<span id="cb37-54"><a href="#cb37-54" aria-hidden="true" tabindex="-1"></a>    <span class="co">#              ...,</span></span>
<span id="cb37-55"><a href="#cb37-55" aria-hidden="true" tabindex="-1"></a>    <span class="co">#               E1n,E2n,E3n,...])</span></span>
<span id="cb37-56"><a href="#cb37-56" aria-hidden="true" tabindex="-1"></a>    <span class="co"># here E11 means E(x=x1,y=y1) etc.</span></span>
<span id="cb37-57"><a href="#cb37-57" aria-hidden="true" tabindex="-1"></a>    xlist<span class="op">=</span>np.array(xlist) </span>
<span id="cb37-58"><a href="#cb37-58" aria-hidden="true" tabindex="-1"></a>    <span class="co"># convert xlist from list to np.array(), which is required</span></span>
<span id="cb37-59"><a href="#cb37-59" aria-hidden="true" tabindex="-1"></a>    <span class="co"># in plt.streamplot()</span></span>
<span id="cb37-60"><a href="#cb37-60" aria-hidden="true" tabindex="-1"></a>    ylist<span class="op">=</span>np.array(ylist)</span>
<span id="cb37-61"><a href="#cb37-61" aria-hidden="true" tabindex="-1"></a>    Exs<span class="op">=</span>np.reshape(Es[:,<span class="dv">0</span>],(m,n))</span>
<span id="cb37-62"><a href="#cb37-62" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Es[:,0] is a 1D numpy array</span></span>
<span id="cb37-63"><a href="#cb37-63" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Es[:,0] = np.array([Ex11,Ex21,Ex31,...,</span></span>
<span id="cb37-64"><a href="#cb37-64" aria-hidden="true" tabindex="-1"></a>    <span class="co">#                     Ex12,Ex22,Ex32,...,</span></span>
<span id="cb37-65"><a href="#cb37-65" aria-hidden="true" tabindex="-1"></a>    <span class="co">#                      ...,</span></span>
<span id="cb37-66"><a href="#cb37-66" aria-hidden="true" tabindex="-1"></a>    <span class="co">#                     Ex1n,Ex2n,Ex3n,...])</span></span>
<span id="cb37-67"><a href="#cb37-67" aria-hidden="true" tabindex="-1"></a>    <span class="co"># here Ex11 means the x component Ex(x=x1,y=y1) etc.</span></span>
<span id="cb37-68"><a href="#cb37-68" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Using np.reshape(Es[:,0], (dim1, dim2)), one can reshape the 1D </span></span>
<span id="cb37-69"><a href="#cb37-69" aria-hidden="true" tabindex="-1"></a>    <span class="co"># array Es[:,0] into a 2d array, of dim1 rows and dim2 columns. </span></span>
<span id="cb37-70"><a href="#cb37-70" aria-hidden="true" tabindex="-1"></a>    Eys<span class="op">=</span>np.reshape(Es[:,<span class="dv">1</span>],(m,n))</span>
<span id="cb37-71"><a href="#cb37-71" aria-hidden="true" tabindex="-1"></a>    plt.streamplot(xlist, ylist, Exs, Eys, density<span class="op">=</span><span class="fl">1.5</span>, color<span class="op">=</span><span class="st">'m'</span>)</span>
<span id="cb37-72"><a href="#cb37-72" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(<span class="st">'$x$'</span>)</span>
<span id="cb37-73"><a href="#cb37-73" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(<span class="st">'$y$'</span>)</span>
<span id="cb37-74"><a href="#cb37-74" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb37-75"><a href="#cb37-75" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb37-76"><a href="#cb37-76" aria-hidden="true" tabindex="-1"></a>plotfield(boxlx <span class="op">=</span> <span class="dv">2</span>, boxly <span class="op">=</span> <span class="dv">1</span>,n <span class="op">=</span> <span class="dv">40</span>, m <span class="op">=</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="week1_files/figure-html/cell-18-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Note that the <code>plt.streamplot()</code> is used to draw streamlines of a vector flow, one can see its <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.streamplot.html">documentation</a>. Alternatively, you can type the following <code>help()</code> function to print out the usage of this function.</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="bu">help</span>(plt.streamplot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Help on function streamplot in module matplotlib.pyplot:

streamplot(x, y, u, v, density=1, linewidth=None, color=None, cmap=None, norm=None, arrowsize=1, arrowstyle='-|&gt;', minlength=0.1, transform=None, zorder=None, start_points=None, maxlength=4.0, integration_direction='both', *, data=None)
    Draw streamlines of a vector flow.
    
    Parameters
    ----------
    x, y : 1D/2D arrays
        Evenly spaced strictly increasing arrays to make a grid.  If 2D, all
        rows of *x* must be equal and all columns of *y* must be equal; i.e.,
        they must be as if generated by ``np.meshgrid(x_1d, y_1d)``.
    u, v : 2D arrays
        *x* and *y*-velocities. The number of rows and columns must match
        the length of *y* and *x*, respectively.
    density : float or (float, float)
        Controls the closeness of streamlines. When ``density = 1``, the domain
        is divided into a 30x30 grid. *density* linearly scales this grid.
        Each cell in the grid can have, at most, one traversing streamline.
        For different densities in each direction, use a tuple
        (density_x, density_y).
    linewidth : float or 2D array
        The width of the stream lines. With a 2D array the line width can be
        varied across the grid. The array must have the same shape as *u*
        and *v*.
    color : color or 2D array
        The streamline color. If given an array, its values are converted to
        colors using *cmap* and *norm*.  The array must have the same shape
        as *u* and *v*.
    cmap : `~matplotlib.colors.Colormap`
        Colormap used to plot streamlines and arrows. This is only used if
        *color* is an array.
    norm : `~matplotlib.colors.Normalize`
        Normalize object used to scale luminance data to 0, 1. If ``None``,
        stretch (min, max) to (0, 1). This is only used if *color* is an array.
    arrowsize : float
        Scaling factor for the arrow size.
    arrowstyle : str
        Arrow style specification.
        See `~matplotlib.patches.FancyArrowPatch`.
    minlength : float
        Minimum length of streamline in axes coordinates.
    start_points : Nx2 array
        Coordinates of starting points for the streamlines in data coordinates
        (the same coordinates as the *x* and *y* arrays).
    zorder : int
        The zorder of the stream lines and arrows.
        Artists with lower zorder values are drawn first.
    maxlength : float
        Maximum length of streamline in axes coordinates.
    integration_direction : {'forward', 'backward', 'both'}, default: 'both'
        Integrate the streamline in forward, backward or both directions.
    data : indexable object, optional
        If given, the following parameters also accept a string ``s``, which is
        interpreted as ``data[s]`` (unless this raises an exception):
    
        *x*, *y*, *u*, *v*, *start_points*
    
    Returns
    -------
    StreamplotSet
        Container object with attributes
    
        - ``lines``: `.LineCollection` of streamlines
    
        - ``arrows``: `.PatchCollection` containing `.FancyArrowPatch`
          objects representing the arrows half-way along stream lines.
    
        This container will probably change in the future to allow changes
        to the colormap, alpha, etc. for both lines and arrows, but these
        changes should be backward compatible.
</code></pre>
</div>
</div>
<p>One can see that <code>plt.streamplot()</code> expects inputs <code>x,y,u,v</code> as 1D or 2D (numpy) arrays. That’s the reason we need to import <code>numpy</code> and convert Lists to numpy arrays. In the following, we will brifely remind you some numpy idioms. More functions of numpy arrays will be introduced later in this course. You can also visit <a href="https://numpy.org/learn/">Numpy website</a> to learn by yourself.</p>
</section>
</section>
<section id="numpy-idioms" class="level2">
<h2 class="anchored" data-anchor-id="numpy-idioms">Numpy idioms</h2>
<p>Numpy arrays are similar to python list. Python lists are often <em>homogeneous</em>, which means they contain elements of only one type. Thus, it makes more sense to carry out tasks using a <em>homogenous</em>, <em>fixed-length</em> container. Numpy arrays are exactly such objects that do this job: it is fast and space-efficient. It also allows us to avoid having to write loops, via so-called <em>vectorization</em>. The standard way of importing numpy arrays into a python program is via</p>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In fact, lists are similar to 1D arrays in numpy, and can be regarded as vectors. Lists of lists are similar to 2D arrays in numpy, and they can be regarded as matrices.<br>
One can even convert between the two easily, see below.</p>
<div class="cell" data-execution_count="87">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>xlist <span class="op">=</span> [<span class="fl">1.</span>,<span class="fl">2.</span>,<span class="fl">3.</span>]</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>xs <span class="op">=</span> np.array(xlist)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(xs),xs)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>y2d_array <span class="op">=</span> np.array([[<span class="fl">1.</span>,<span class="fl">2.</span>,<span class="fl">3.</span>],[<span class="fl">4.</span>,<span class="fl">5.</span>,<span class="fl">6.</span>],[<span class="fl">7.</span>,<span class="fl">8.</span>,<span class="fl">9.</span>]])</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>y2dlist <span class="op">=</span> y2d_array.tolist()</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(y2dlist),y2dlist)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'numpy.ndarray'&gt; [1. 2. 3.]
&lt;class 'list'&gt; [[1.0, 2.0, 3.0], [4.0, 5.0, 6.0], [7.0, 8.0, 9.0]]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="80">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>xs.tolist()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="80">
<pre><code>[1, 2, 3]</code></pre>
</div>
</div>
<p>Below we shall see the great acceleration when we compute elementwise multiplication using numpy arrays.</p>
<div class="cell" data-execution_count="67">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> elementwise_multiplication(xlist,ylisg):</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [x<span class="op">*</span>y <span class="cf">for</span> x,y <span class="kw">in</span> <span class="bu">zip</span>(xlist,ylist)]</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create a random 1D array of length 100</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>len_n <span class="op">=</span> <span class="dv">1000000</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>xs <span class="op">=</span> np.random.rand(len_n)</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>ys <span class="op">=</span> np.random.rand(len_n)</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="co"># xlist, ylist are the corresponding lists for xs and ys</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>xlist <span class="op">=</span> <span class="bu">list</span>(xs)</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>ylist <span class="op">=</span> <span class="bu">list</span>(ys)</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a><span class="co"># perform elementwise multiplication with lists</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a><span class="co"># One can use Jupyter's built-in magic '%time' to</span></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a><span class="co"># measure the running time for a single line of code.</span></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Using python lists:"</span>)</span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>time zlist <span class="op">=</span> elementwise_multiplication(xlist,ylist)</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Using numpy array with vectorization:"</span>)</span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>time zs <span class="op">=</span> xs<span class="op">*</span>ys</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Using python lists:
CPU times: total: 62.5 ms
Wall time: 111 ms
Using numpy array with vectorization:
CPU times: total: 0 ns
Wall time: 3.01 ms</code></pre>
</div>
</div>
<p><strong>Slicing arrays</strong> Consider a 2D array <code>A</code>. One can access its first row via <code>A[0,:]</code>, and its first column via <code>A[:,0]</code>. Note that the row or column indices run from zero.</p>
<div class="cell" data-execution_count="91">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> np.array([[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>],[<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>],[<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>]])</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(A[<span class="dv">0</span>,:])</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(A[:,<span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1 2 3]
[1 4 7]</code></pre>
</div>
</div>
<p><strong>Reshape arrays</strong> Sometimes it is very useful to reshape numpy arrays. For example, we can reshape a <span class="math inline">\(3 \times 2\)</span> 2D array into a 1D array of length <span class="math inline">\(6\)</span>, and vice versa. See the following example.</p>
<div class="cell" data-execution_count="93">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>x1d <span class="op">=</span> np.array([[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]])</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>x2d <span class="op">=</span> np.reshape(x1d,(<span class="dv">3</span>,<span class="dv">2</span>))</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x2d)</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x2d.flatten())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1 2]
 [3 4]
 [5 6]]
[1 2 3 4 5 6]</code></pre>
</div>
</div>
<p>In the above example, when we reshape the 1D array into a 2D array, the column (second) indices increase faster than the row (first) indices. This is known as the <em>C-type</em> ordering, which in general requires the last index in an ndarray changes the fastest. (On the contrary, in other programming languages, such as Matlab and Fortran, the first index changes the fastest. This is known as the <em>Fortran-type</em> ordering.)</p>
</section>
<section id="homework-problems" class="level2">
<h2 class="anchored" data-anchor-id="homework-problems">Homework Problems</h2>
<p>Please submit your codes in a jupyter notebook *.ipynb.</p>
<ol type="1">
<li>Iterate through a list <code>xs</code> in reverse, printing out both the index (which will be decreasing) and each element itself.</li>
<li>Try to reproduce the electric field plot shown below with 4 point charges, at (1,0), (-1,0), (0,1), (0,-1). (You should first determine the sign of the charges, assusming they all have the same magnitude.) <img src="homework2.png" class="img-fluid" alt="Electric field"></li>
</ol>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    toggleBodyColorMode(window.document.querySelector("link#quarto-bootstrap"));
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>